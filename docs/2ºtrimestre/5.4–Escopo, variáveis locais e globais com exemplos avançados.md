# ğŸ” CapÃ­tulo 5.4 â€“ Escopo, VariÃ¡veis Locais e Globais (com Exemplos AvanÃ§ados)

> âœ¨ *â€œEntender escopo Ã© como entender onde cada variÃ¡vel vive. Ã‰ a diferenÃ§a entre uma conversa privada e um anÃºncio pÃºblico no programa.â€*

------

## ğŸ§  5.4.1 O que Ã© escopo de variÃ¡vel?

### ğŸ“˜ DefiniÃ§Ã£o

**Escopo** Ã© o **limite onde uma variÃ¡vel pode ser acessada**.

Em Python, o escopo determina **se uma variÃ¡vel pode ser usada dentro ou fora de uma funÃ§Ã£o**.

| Tipo de variÃ¡vel | Onde pode ser usada                | VisÃ­vel fora da funÃ§Ã£o? |
| ---------------- | ---------------------------------- | ----------------------- |
| **Local**        | Apenas dentro da funÃ§Ã£o            | âŒ NÃ£o                   |
| **Global**       | Em todo o cÃ³digo (arquivo inteiro) | âœ… Sim                   |

------

## ğŸ” 5.4.2 VariÃ¡veis locais â€“ Criadas dentro da funÃ§Ã£o

```python
def exibir_mensagem():
    mensagem = "OlÃ¡, mundo!"  # variÃ¡vel local
    print(mensagem)

exibir_mensagem()
# print(mensagem)  # âŒ ERRO: mensagem nÃ£o existe fora da funÃ§Ã£o
```

ğŸ“Œ A variÃ¡vel `mensagem` Ã© **criada e destruÃ­da** dentro da funÃ§Ã£o.

------

## ğŸŒ 5.4.3 VariÃ¡veis globais â€“ Criadas fora de funÃ§Ãµes

```python
curso = "InformÃ¡tica"  # variÃ¡vel global

def apresentar_curso():
    print("Curso:", curso)  # acessa a variÃ¡vel global

apresentar_curso()  # Curso: InformÃ¡tica
```

ğŸ” Se a variÃ¡vel **nÃ£o for redefinida na funÃ§Ã£o**, o Python a procura fora dela (no escopo global).

------

## ğŸ§± 5.4.4 Quando variÃ¡veis locais e globais tÃªm o mesmo nome

```python
mensagem = "Mensagem global"

def mostrar():
    mensagem = "Mensagem local"
    print("Dentro da funÃ§Ã£o:", mensagem)

mostrar()
print("Fora da funÃ§Ã£o:", mensagem)
```

ğŸ“Œ A funÃ§Ã£o **cria uma nova variÃ¡vel local**, que **nÃ£o altera** a global.

------

## âš ï¸ 5.4.5 Modificando variÃ¡veis globais com `global`

```python
contador = 0

def incrementar():
    global contador    # indica que vamos alterar a variÃ¡vel global
    contador += 1

incrementar()
print(contador)  # 1
```

ğŸ§  Ao declarar `global contador`, o Python entende que vocÃª quer **usar a mesma variÃ¡vel do escopo global**.

------

## ğŸš« 5.4.6 Quando **nÃ£o usar** `global`

- Quando possÃ­vel, **evite usar `global`**
- Prefira que a funÃ§Ã£o **retorne um valor**
- Atualize a variÃ¡vel **fora da funÃ§Ã£o**

### âœ… Exemplo recomendado:

```python
def incrementar(valor):
    return valor + 1

contador = 0
contador = incrementar(contador)
print(contador)  # 1
```

------

## ğŸ§© 5.4.7 FunÃ§Ãµes dentro de funÃ§Ãµes (escopo interno)

Python permite **definir funÃ§Ãµes dentro de funÃ§Ãµes**.
 Isso cria um **escopo ainda mais restrito**.

```python
def saudacao(nome):
    def mensagem():
        return "Bem-vindo(a)"
    return f"{mensagem()}, {nome}!"

print(saudacao("Ana"))  # Bem-vindo(a), Ana!
```

ğŸ“Œ A funÃ§Ã£o `mensagem()` sÃ³ pode ser chamada **dentro** da funÃ§Ã£o `saudacao()`.

------

## ğŸ§  5.4.8 Exemplos com listas e contadores

```python
nomes = []

def cadastrar(nome):
    nomes.append(nome)  # lista global Ã© modificada sem 'global'

cadastrar("Carlos")
print(nomes)  # ['Carlos']
```

ğŸ” Listas e dicionÃ¡rios **sÃ£o mutÃ¡veis**, por isso podem ser **modificados** dentro da funÃ§Ã£o, mesmo sem `global`.

------

## âœ… Boas prÃ¡ticas com escopo

| PrÃ¡tica                                    | Por quÃª aplicar?                                            |
| ------------------------------------------ | ----------------------------------------------------------- |
| Evite `global` para tipos primitivos       | Pode tornar o cÃ³digo difÃ­cil de manter e depurar            |
| Prefira `return` e reatribuiÃ§Ã£o externa    | Garante maior previsibilidade                               |
| Use nomes diferentes para locais e globais | Evita ambiguidade e erros de lÃ³gica                         |
| Documente funÃ§Ãµes que usam escopo interno  | Torna o cÃ³digo mais compreensÃ­vel para manutenÃ§Ã£o e leitura |

------

## ğŸ§  Desafio guiado com explicaÃ§Ãµes

> Crie uma funÃ§Ã£o `registro()` que adiciona nomes a uma lista global `alunos`
>  A funÃ§Ã£o deve retornar quantos alunos estÃ£o registrados

```python
alunos = []

def registro(nome):
    alunos.append(nome)
    return len(alunos)

print(f"{registro('Ana')} aluno(s) registrado(s)")
print(f"{registro('Bruno')} aluno(s) registrado(s)")
print(f"Lista atual: {alunos}")
```

ğŸ§  Apesar da variÃ¡vel `alunos` ser global, **nÃ£o usamos `global`** pois estamos **modificando um objeto mutÃ¡vel** (lista).

------

## ğŸ“˜ ExercÃ­cios Propostos

1. ğŸ§¾ Crie uma variÃ¡vel global `mensagem = "OlÃ¡"`
   - Crie uma funÃ§Ã£o que **exibe** a mensagem
   - Depois, crie uma funÃ§Ã£o que **modifica** a mensagem com `global`
2. ğŸ§® Crie uma funÃ§Ã£o `dobrar(n)` que **nÃ£o modifica** uma variÃ¡vel externa
   - FaÃ§a a reatribuiÃ§Ã£o fora da funÃ§Ã£o
3. ğŸ“¦ Crie uma lista global `compras`
   - Crie uma funÃ§Ã£o `adicionar(item)` que adiciona Ã  lista
   - Mostre a lista ao final
4. ğŸ§  Desafio:
   - Crie um contador global que comeÃ§a em 0
   - Crie 3 funÃ§Ãµes:
     - `zerar()` â†’ zera o contador
     - `somar()` â†’ adiciona 1
     - `exibir()` â†’ imprime o valor atual
5. ğŸ“ Crie uma funÃ§Ã£o que calcula mÃ©dia de notas, mas usa um `peso` definido **fora da funÃ§Ã£o**
   - FaÃ§a uma versÃ£o que usa `global peso`
   - E outra que **recebe o peso como argumento**

------

